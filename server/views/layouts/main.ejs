<!doctype html>
<html lang="sw">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <% const canonicalUrl = meta?.canonical || site.url + currentPath; %>
  <% const imageUrl = (meta?.image || site.defaultImage).startsWith('http') ? (meta?.image || site.defaultImage) : site.url + (meta?.image || site.defaultImage); %>
  <meta name="description" content="<%= meta?.description || site.description %>" />
  <meta name="generator" content="express-ssr" />
  <% if (site.googleVerification) { %>
  <meta name="google-site-verification" content="<%= site.googleVerification %>" />
  <% } %>

  <title><%= meta?.title || site.name %></title>
  <link rel="canonical" href="<%= canonicalUrl %>" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="<%= meta?.title || site.name %>" />
  <meta property="og:description" content="<%= meta?.description || site.description %>" />
  <meta property="og:image" content="<%= imageUrl %>" />
  <meta property="og:url" content="<%= canonicalUrl %>" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="<%= meta?.title || site.name %>" />
  <meta name="twitter:description" content="<%= meta?.description || site.description %>" />
  <meta name="twitter:image" content="<%= imageUrl %>" />

  <!-- Preconnect for Bootstrap and Font Awesome to reduce connection time -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>

  <!-- Preload boostrap with rel=preload -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="preload" as="style"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <!-- Applying boostrap with rel=stylesheet -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />

  <!-- Preload Font Awesome if critical to visual content; otherwise, defer- -->
  <!-- here we defer with media=print and onload -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'" />

  <!-- Main CSS -->
  <link rel="stylesheet" href="/css/main.css" />

  <!-- htmx -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  
  <!-- Extra Styles -->
  <% const extra = typeof extraStyles !== 'undefined' ? (Array.isArray(extraStyles) ? extraStyles : [extraStyles]) : []; %>
  <% extra.forEach((href) => { %>
  <link rel="stylesheet" href="<%= href %>" />
  <% }) %>
</head>

<body class="bg-surface">
  <div class="app-shell d-flex">
    <%- include('../partials/sidebar', { activeId }) %>
    <div class="content flex-grow-1">
      <%- include('../partials/topbar', { activeId }) %>
      <main class="page-body">
        <%- body %>
      </main>
      <%- include('../partials/footer') %>
      <% if (!['vip', null].includes(activeId)) { %>
      <%- include('../partials/modals/betwinner') %>
      <% } %>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <script src="/js/sidebar.js"></script>
  <script src="/js/auth-forms.js"></script>
  <script>
    window.OpenAff = function (slug) {
      const url = `https://bet-link.top/${slug}/register`;
      window.open(url, '_blank');
    };
  </script>
  <%- include('../partials/toasts') %>
</body>

</html>